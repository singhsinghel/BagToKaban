<% layout('/layout/boilerplate') %>
<style>
  .card{
    transform: scale(0.8);
    height: 20rem !important;
    padding: 0;
  }
  .card-body{
  }
</style>
<div class="container-fluid">
  <div class="row h-100">
      <div class="col-md-3">
          <div class="mt-4">
              <h3>Sort by</h3>
              <form action="/shop" method="get" onchange="this.form,submit()">
                  <select class="form-select" name="sortby">
                      <option value="popular">Popular</option>
                      <option value="newest">Newest</option>
                  </select>
              </form>
          </div>
          <div class="mt-5">
              <a class="d-block mb-2" href="/shop">New Collection</a>
              <a class="d-block mb-2" href="/shop">All Products</a>
              <a class="d-block mb-2" href="/shop/discount">Discounted Products</a>
          </div>
          <div class="mt-5">
              <a class="d-block mb-2" href="#">Filter by :</a>
              <a class="d-block mb-2" href="#">Availability</a>
              <a class="d-block mb-2" href="/shop/discount">Discount</a>
              <a href="/admin">Add New</a>
          </div>
      </div>
      <div class="col-md-9">
          <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4 mt-4">
              <% products.forEach(function(product){ %>
                <div class="card d-flex flex-column  h-100">
                    <a href="/products/<%= product._id %>/show">
                        <div class="card-body  d-flex justify-content-center align-items-center " style="background-color: <%= product.bgcolor %>;">
                            <img class="img-fluid" style="max-height: 12rem;" src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" alt="">
                        </div>
                    </a>
                    <div class="card-footer h-100 d-flex justify-content-between align-items-center" style=" background-color: <%= product.panelColor %>; color: <%= product.textColor %>;">
                        <div>
                            <h4 class="card-title m-0"><%= product.name %></h4>
                            <h5 class="card-subtitle m-0">â‚¹ <%= product.price %></h5>
                        </div>
                        <a class="btn btn-light rounded-circle" href="/add/<%= product._id %>">
                            <i class="ri-add-line"></i>
                        </a>
                    </div>
                </div>
                
              <% }) %>
          </div>
      </div>
  </div>
</div>